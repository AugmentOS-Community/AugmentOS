# AugmentOS Developer Portal Design Document

**Author:** Isaiah Ballah (github: isaiahb)  
**Date:** Sunday, February 23rd, 2025  
**Version:** 1.0  

## 1. Overview

This document outlines the design for the AugmentOS Developer Portal, a web application that enables developers to register, manage, and monitor their TPAs. The Developer Portal is tied to our system app store and provides developers with the tools needed to create and distribute applications for the AugmentOS platform.

## 2. Objectives

The primary objectives of the Developer Portal are to:

1. Provide an interface for developers to register their TPAs
2. Allow developers to manage their existing TPAs
3. Enable developers to generate and manage API keys
4. Display only the developer's own TPAs (not other developers' TPAs)
5. Support the definition of TPA settings

## 3. User Interface Design

### 3.1 Core Screens

#### 3.1.1 Dashboard

The main dashboard screen that developers see after logging in.

**Key Components:**
- Summary of registered TPAs
- Quick actions (create new TPA, view existing TPAs)
- System status information

![Developer Dashboard Layout](placeholder)

#### 3.1.2 TPA Registration Form

Form for registering a new TPA in the system.

**Key Components:**
- Package name input (with validation for format `^[a-z0-9.-]+$`)
- Display name input
- Description textarea
- Webhook URL input
- Logo URL input
- Webview URL input (optional)
- TPA type selection (dropdown)
- Settings schema definition
- Submit button

![TPA Registration Form Layout](placeholder)

#### 3.1.3 TPA Management Screen

Screen for viewing and managing existing TPAs.

**Key Components:**
- List of all TPAs registered by the developer
- Actions for each TPA (edit, delete, regenerate API key)
- Filter and search functionality
- Status indicators

![TPA Management Screen Layout](placeholder)

#### 3.1.4 API Key Management

Interface for managing API keys for TPAs.

**Key Components:**
- Current API key display (masked)
- Regenerate API key button
- Key creation date and status

![API Key Management Layout](placeholder)

#### 3.1.5 Settings Schema Editor

Interface for defining the settings schema for a TPA.

**Key Components:**
- Form to add different setting types (toggle, text, select)
- Preview of settings as they would appear to users
- JSON editor for advanced users

![Settings Schema Editor Layout](placeholder)

### 3.2 Navigation

The portal will use a sidebar navigation with the following structure:

- Dashboard
- My TPAs
  - Register New TPA
  - Manage TPAs
- Documentation
- Account Settings
- Sign Out

## 4. Technical Design

### 4.1 Technology Stack

- **Frontend Framework**: React
- **State Management**: React Context API + custom hooks
- **UI Components**: Either Material UI or Tailwind CSS
- **API Communication**: Axios or Fetch API
- **Authentication**: JWT token-based auth

### 4.2 API Integration

The Developer Portal will communicate with the AugmentOS Cloud backend via REST APIs:

#### 4.2.1 Authentication APIs

```
POST /auth/login
POST /auth/register
POST /auth/logout
GET /auth/me
```

#### 4.2.2 TPA Management APIs

```
GET /api/apps/developer          // Get all TPAs for the current developer
POST /api/apps/register          // Register a new TPA
PUT /api/apps/:packageName       // Update an existing TPA
DELETE /api/apps/:packageName    // Delete a TPA
```

#### 4.2.3 API Key Management

```
POST /api/apps/:packageName/api-key  // Generate a new API key
```

### 4.3 State Management

The application will use React Context for global state management:

```javascript
// AuthContext.js
const AuthContext = React.createContext();

function AuthProvider({ children }) {
  const [user, setUser] = useState(null);
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [loading, setLoading] = useState(true);

  // Auth methods will go here
  
  return (
    <AuthContext.Provider value={{ user, isAuthenticated, loading, login, logout, register }}>
      {children}
    </AuthContext.Provider>
  );
}

// TPAContext.js
const TPAContext = React.createContext();

function TPAProvider({ children }) {
  const [tpas, setTPAs] = useState([]);
  const [selectedTPA, setSelectedTPA] = useState(null);
  const [loading, setLoading] = useState(false);

  // TPA methods will go here
  
  return (
    <TPAContext.Provider value={{ tpas, selectedTPA, loading, registerTPA, updateTPA, deleteTPA, regenerateAPIKey }}>
      {children}
    </TPAContext.Provider>
  );
}
```

### 4.4 Form Validation

The Developer Portal will implement extensive form validation for TPA registration:

- Package name: Must match the pattern `^[a-z0-9.-]+$`
- Name: Required, maximum 50 characters
- Description: Required, maximum 500 characters
- Webhook URL: Must be a valid URL
- Logo URL: Must be a valid URL
- TPA type: Must be a valid selection

Example validation logic:
```javascript
function validatePackageName(name) {
  const pattern = /^[a-z0-9.-]+$/;
  if (!pattern.test(name)) {
    return 'Package name must use lowercase letters, numbers, dots, and hyphens only';
  }
  return '';
}

function validateURL(url) {
  try {
    new URL(url);
    return '';
  } catch (e) {
    return 'Please enter a valid URL';
  }
}
```

### 4.5 Settings Schema Editor

The settings schema editor will support three types of settings:

1. **Toggle Setting**:
```javascript
{
  type: "toggle",
  key: "enableFeatureX",
  label: "Enable Feature X",
  defaultValue: false
}
```

2. **Text Setting**:
```javascript
{
  type: "text",
  key: "apiEndpoint",
  label: "API Endpoint",
  defaultValue: "https://api.example.com"
}
```

3. **Select Setting**:
```javascript
{
  type: "select",
  key: "theme",
  label: "Theme",
  options: [
    { label: "Light", value: "light" },
    { label: "Dark", value: "dark" },
    { label: "System", value: "system" }
  ],
  defaultValue: "system"
}
```

The interface will provide both a form-based editor and a JSON editor for advanced users.

## 5. Authentication & Authorization

### 5.1 User Authentication

The Developer Portal will use JWT-based authentication:

- Developers log in with email/password
- Backend validates credentials and issues a JWT
- JWT is stored in localStorage/cookies and included in API requests
- Expired tokens require re-authentication

### 5.2 TPA Authorization

Developer can only see and manage their own TPAs:

- Backend enforces that developers can only access their own TPAs
- API endpoints verify developer ID against TPA ownership
- Frontend prevents unauthorized access attempts

## 6. Implementation Plan

The implementation will follow these phases:

### 6.1 Phase 1: Core Infrastructure

1. Create React application with routing
2. Set up authentication system
3. Implement API client for backend communication
4. Create basic layout and navigation

### 6.2 Phase 2: TPA Registration

1. Implement TPA registration form
2. Add form validation
3. Integrate with backend API
4. Implement success/error handling

### 6.3 Phase 3: TPA Management

1. Create TPA list view
2. Implement TPA editing functionality
3. Add TPA deletion with confirmation
4. Implement API key management

### 6.4 Phase 4: Settings Schema Editor

1. Create UI for settings schema definition
2. Implement preview functionality
3. Add JSON editor for advanced users
4. Integrate with TPA registration/editing

### 6.5 Phase 5: Testing & Polish

1. Perform usability testing
2. Fix identified issues
3. Implement performance optimizations
4. Add final UI polish

## 7. Security Considerations

### 7.1 API Key Protection

- API keys are never displayed in plain text after initial generation
- Keys are shown masked in the UI (e.g., "sk_...abc123")
- Regenerating keys requires confirmation
- Keys are transmitted securely (HTTPS only)

### 7.2 Input Sanitization

- All user inputs are sanitized before being sent to the backend
- JSON schema validation for settings to prevent injection attacks
- XSS prevention in the UI

### 7.3 Authentication Security

- Implement best practices for JWT handling
- Add CSRF protection
- Use secure cookies when appropriate
- Implement rate limiting for auth endpoints

## 8. Testing Strategy

### 8.1 Unit Testing

- Test individual components in isolation
- Validate form components and validation logic
- Test state management

### 8.2 Integration Testing

- Test API integration
- Verify authentication flow
- Test TPA registration and management

### 8.3 End-to-End Testing

- Complete user journeys (register, manage, delete TPAs)
- Cross-browser testing
- Mobile responsiveness testing

## 9. Future Considerations

While out of scope for the initial implementation, these items could be considered for future updates:

- Developer analytics dashboard
- TPA testing tools
- Documentation integration
- Advanced app monitoring